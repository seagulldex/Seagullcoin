<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SGLCN-X20 NFT Minter</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="Mint.css">
</head>
<body>

  <header>
    <div class="logo">SGLCN-X20 NFT Minter</div>
    <nav>
      <select onchange="if(this.value) window.location.href=this.value">
        <option value="">Menu</option>
        <option value="/NFT.html">NFTs</option>
      </select>
    </nav>
  </header>

  <main>
    <section>
      <h1>Mint a New NFT</h1>
      <form id="mintForm">
        <input type="text" placeholder="NFT Name" required>
        <textarea placeholder="NFT Description"></textarea>
        <input type="text" placeholder="Domain (optional)">
        <div id="propertiesContainer">
          <h3>Properties</h3>
          <!-- Properties Section (max 8) -->
          <div class="property">
            <input type="text" placeholder="Property Name (e.g., color)">
            <input type="text" placeholder="Value (e.g., red)">
            <button type="button" class="addPropertyBtn">+</button>
            <button type="button" class="removePropertyBtn">-</button>
          </div>
          <!-- More properties will be added dynamically -->
        </div>

        <div class="drop-area" id="fileDropArea">
          <p>Drag & drop files here or click to upload</p>
        </div>
        <div id="previewWrapper">
          <!-- Preview Images, Videos, or GIFs will appear here -->
        </div>

        <select id="collection">
          <option value="">Select Collection</option>
          <option value="new">+ Create New Collection</option>
        </select>
        
        <button type="submit">Mint NFT</button>
      </form>
    </section>
  </main>

  <!-- Create Collection Modal -->
  <div id="collectionModal" class="modal">
    <div class="modal-content">
      <h2>Create New Collection</h2>
      <input type="text" id="collectionName" placeholder="Collection Name" required />
      <input type="file" id="collectionLogo" accept="image/*" />
      <input type="text" id="collectionDescription" placeholder="Description" />
      <input type="text" id="collectionDomain" placeholder="Domain (e.g., https://example.com)" />
      <input type="text" id="collectionWebsite" placeholder="Website" />
      <input type="text" id="collectionTelegram" placeholder="Telegram Handle" />
      <div class="modal-actions">
        <button id="saveCollection">Save</button>
        <button id="cancelCollection">Cancel</button>
      </div>
    </div>
  </div>

  <script>
    // Modal logic for collection creation
    const collectionSelect = document.getElementById('collection');
    const modal = document.getElementById('collectionModal');
    const cancelBtn = document.getElementById('cancelCollection');
    const saveBtn = document.getElementById('saveCollection');

    collectionSelect.addEventListener('change', () => {
      if (collectionSelect.value === 'new') {
        modal.style.display = 'flex';
      }
    });

    cancelBtn.addEventListener('click', () => {
      modal.style.display = 'none';
      collectionSelect.value = '';
    });

    saveBtn.addEventListener('click', () => {
      const name = document.getElementById('collectionName').value;
      if (!name) return alert('Please enter a collection name.');

      const option = document.createElement('option');
      option.value = name;
      option.textContent = name;
      collectionSelect.appendChild(option);
      collectionSelect.value = name;

      modal.style.display = 'none';
    });

    // Logic for adding/removing properties dynamically
    const propertiesContainer = document.getElementById('propertiesContainer');
    const addPropertyBtn = document.querySelector('.addPropertyBtn');
    const removePropertyBtn = document.querySelector('.removePropertyBtn');

    addPropertyBtn.addEventListener('click', () => {
      const propertyCount = propertiesContainer.querySelectorAll('.property').length;

      if (propertyCount < 8) { // Allow up to 8 properties
        const newProperty = document.createElement('div');
        newProperty.classList.add('property');
        newProperty.innerHTML = `
          <input type="text" placeholder="Property Name">
          <input type="text" placeholder="Value">
          <button type="button" class="addPropertyBtn">+</button>
          <button type="button" class="removePropertyBtn">-</button>
        `;
        propertiesContainer.appendChild(newProperty);
      }
    });

    propertiesContainer.addEventListener('click', (e) => {
      if (e.target.classList.contains('removePropertyBtn')) {
        e.target.parentElement.remove();
      }
    });

    // File drag and drop area logic
    const fileDropArea = document.getElementById('fileDropArea');
    const previewWrapper = document.getElementById('previewWrapper');

    fileDropArea.addEventListener('click', () => {
      const fileInput = document.createElement('input');
      fileInput.type = 'file';
      fileInput.accept = 'image/*,video/*';
      fileInput.onchange = (e) => {
        handleFilePreview(e.target.files[0]);
      };
      fileInput.click();
    });

    fileDropArea.addEventListener('dragover', (e) => {
      e.preventDefault();
      fileDropArea.classList.add('drag-over');
    });

    fileDropArea.addEventListener('dragleave', () => {
      fileDropArea.classList.remove('drag-over');
    });

    fileDropArea.addEventListener('drop', (e) => {
      e.preventDefault();
      fileDropArea.classList.remove('drag-over');
      const files = e.dataTransfer.files;
      if (files.length > 0) {
        handleFilePreview(files[0]);
      }
    });

    function handleFilePreview(file) {
      const reader = new FileReader();
      reader.onload = function (e) {
        let previewElement;
        if (file.type.startsWith('image/')) {
          previewElement = document.createElement('img');
          previewElement.src = e.target.result;
        } else if (file.type.startsWith('video/')) {
          previewElement = document.createElement('video');
          previewElement.src = e.target.result;
          previewElement.controls = true;
        }
        previewWrapper.innerHTML = ''; // Clear previous previews
        previewWrapper.appendChild(previewElement);
      };
      reader.readAsDataURL(file);
    }
  </script>
</body>
</html>
