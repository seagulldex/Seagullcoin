{
  "openapi": "3.0.0",
  "info": {
    "title": "SeagullCoin NFT Minting API",
    "description": "API for minting SeagullCoin-only NFTs, verifying payments, and interacting with the SeagullCoin network.",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://sglcn-x20-api.glitch.me"
    }
  ],
  "paths": {
    "/api/ping": {
      "get": {
        "summary": "Ping the API",
        "description": "Check if the API is alive.",
        "responses": {
          "200": {
            "description": "API is alive",
            "content": {
              "application/json": {
                "example": {
                  "status": "SGLCN-X20 Minting API is alive"
                }
              }
            }
          }
        }
      }
    },
    "/api/login": {
      "get": {
        "summary": "Login via XUMM OAuth2",
        "description": "Redirects the user to XUMM OAuth2 for login.",
        "responses": {
          "302": {
            "description": "Redirects to XUMM OAuth2 login"
          }
        }
      }
    },
    "/api/callback": {
      "get": {
        "summary": "XUMM OAuth2 Callback",
        "description": "Handles the callback from XUMM OAuth2 and stores the access token.",
        "parameters": [
          {
            "name": "code",
            "in": "query",
            "required": true,
            "description": "OAuth2 authorization code",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "302": {
            "description": "Redirects to the docs page after successful login"
          },
          "400": {
            "description": "Missing or invalid OAuth2 code"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/logout": {
      "get": {
        "summary": "Logout from XUMM",
        "description": "Logs the user out by destroying the session.",
        "responses": {
          "302": {
            "description": "Redirects to the docs page after logout"
          }
        }
      }
    },
    "/api/user": {
      "get": {
        "summary": "Get authenticated user information",
        "description": "Fetches the user details from XUMM after successful authentication.",
        "responses": {
          "200": {
            "description": "User information retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "user_id": "xumm123",
                  "user_name": "John Doe",
                  "xrp_address": "r9Pz2tH2Fz6L4U7J7RxQkQwCJQ2zXYZz3t",
                  "profile_picture": "https://xumm.com/picture.jpg"
                }
              }
            }
          },
          "401": {
            "description": "User is not authenticated"
          },
          "500": {
            "description": "Failed to fetch user information"
          }
        }
      }
    },
    "/mint": {
      "post": {
        "summary": "Mint a SeagullCoin NFT",
        "description": "Allows a user to mint an NFT with a 0.5 SeagullCoin payment.",
        "parameters": [
          {
            "name": "nft_name",
            "in": "formData",
            "required": true,
            "description": "Name of the NFT",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "nft_description",
            "in": "formData",
            "required": true,
            "description": "Description of the NFT",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "domain",
            "in": "formData",
            "required": true,
            "description": "Domain of the NFT",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "properties",
            "in": "formData",
            "required": false,
            "description": "Additional properties of the NFT",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "nft_file",
            "in": "formData",
            "required": true,
            "description": "File representing the NFT image or media",
            "schema": {
              "type": "file"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "NFT minted successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "nftId": "abc123"
                }
              }
            }
          },
          "400": {
            "description": "Minting requires 0.5 SeagullCoin payment"
          },
          "500": {
            "description": "Failed to mint NFT"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "OAuth2": {
        "type": "oauth2",
        "flows": {
          "authorizationCode": {
            "authorizationUrl": "https://oauth2.xumm.app/auth",
            "tokenUrl": "https://oauth2.xumm.app/token",
            "scopes": {
              "identity": "Access user identity",
              "payload": "Access XUMM payload"
            }
          }
        }
      }
    }
  },
  "security": [
    {
      "OAuth2": ["identity", "payload"]
    }
  ]
}
