openapi: 3.0.0
info:
  title: SGLCN-X20 Minting API
  version: "1.0.0"
  description: |
    API for minting and buying NFTs using SeagullCoin (SGLCN-X20).
    - Mint NFTs (with media upload)
    - Buy NFTs
    - Sell NFTs
    - View NFTs for sale
    - XUMM OAuth2 login
    - Place offers and bids on NFTs
    - Auction system for NFTs
    - Manage NFT collections
    - View platform metrics
servers:
  - url: https://sglcn-x20-api.glitch.me
    description: Production server
paths:
  /:
    get:
      summary: Welcome
      description: Welcome message and API information.
      responses:
        '200':
          description: API welcome message
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: "Welcome to the SGLCN-X20 Minting API"
  /api/login:
    get:
      summary: XUMM OAuth2 Login
      description: Redirects user to XUMM OAuth2 login page.
      responses:
        '302':
          description: Redirect to XUMM login page
  /mint:
    post:
      summary: Mint a new NFT
      description: Mint a new NFT after verifying SeagullCoin payment.
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                nft_name:
                  type: string
                  description: Name of the NFT
                nft_description:
                  type: string
                  description: Description of the NFT
                domain:
                  type: string
                  description: Domain linked to the NFT
                properties:
                  type: string
                  description: JSON stringified additional properties
                nft_file:
                  type: string
                  format: binary
                  description: Image or video file for the NFT
      responses:
        '200':
          description: Successfully minted NFT
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  mintResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, payment not found)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /buy-nft:
    post:
      summary: Buy an NFT
      description: Purchase an NFT after verifying SeagullCoin payment.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT to purchase
                price:
                  type: string
                  description: Price to pay in SeagullCoin
      responses:
        '200':
          description: Successfully purchased NFT
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  purchaseResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, payment not verified)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /sell-nft:
    post:
      summary: Sell an NFT
      description: List an NFT for sale after verifying SeagullCoin payment.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT to sell
                price:
                  type: string
                  description: Price to sell the NFT in SeagullCoin
      responses:
        '200':
          description: Successfully listed NFT for sale
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  saleResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, invalid price)
        '402':
          description: Payment Required (SeagullCoin payment not verified)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /place-offer:
    post:
      summary: Place an offer on an NFT
      description: Place an offer to buy an NFT at a specific price in SeagullCoin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT to place the offer on
                offerPrice:
                  type: string
                  description: Offer price in SeagullCoin
      responses:
        '200':
          description: Successfully placed offer
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  offerResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, invalid price)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /place-bid:
    post:
      summary: Place a bid on an NFT
      description: Place a bid to purchase an NFT at a higher price in SeagullCoin.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT to place a bid on
                bidPrice:
                  type: string
                  description: Bid price in SeagullCoin
      responses:
        '200':
          description: Successfully placed bid
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  bidResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, invalid price)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /auction/start:
    post:
      summary: Start an NFT auction
      description: Starts an auction for an NFT with a set reserve price and auction duration.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT to start the auction for
                reservePrice:
                  type: string
                  description: Reserve price in SeagullCoin
                duration:
                  type: integer
                  description: Auction duration in seconds
      responses:
        '200':
          description: Successfully started auction
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  auctionResult:
                    type: object
        '400':
          description: Bad Request (e.g., missing fields, invalid price)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /auction/close:
    post:
      summary: Close an NFT auction
      description: Closes an NFT auction and determines the winner.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                nftId:
                  type: string
                  description: ID of the NFT auction to close
      responses:
        '200':
          description: Successfully closed auction
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  closeResult:
                    type: object
        '400':
          description: Bad Request (e.g., auction already closed)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /user/profile:
    get:
      summary: Get user profile
      description: Retrieves the user's profile, including owned NFTs, wallet balance, custom name, and profile picture.
      responses:
        '200':
          description: User profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  profile:
                    type: object
                    properties:
                      walletAddress:
                        type: string
                        description: User's wallet address
                      nftsOwned:
                        type: array
                        items:
                          type: string
                        description: List of NFTs owned by the user
                      balance:
                        type: string
                        description: SeagullCoin balance
                      customName:
                        type: string
                        description: The custom name set by the user
                      profilePicture:
                        type: string
                        description: URL to the user's profile picture
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
  /user/profile:
    post:
      summary: Update user profile
      description: Allows users to set a custom name and upload a profile picture.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                customName:
                  type: string
                  description: The custom name to set for the user
                profilePicture:
                  type: string
                  description: URL to the new profile picture
      responses:
        '200':
          description: Successfully updated profile
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  updatedProfile:
                    type: object
                    properties:
                      customName:
                        type: string
                        description: The updated custom name
                      profilePicture:
                        type: string
                        description: URL to the updated profile picture
        '400':
          description: Bad Request (e.g., invalid data)
        '500':
          description: Internal Server Error
      security:
        - XUMM_OAuth2: []
